var k=Object.defineProperty;var K=(c,t,e)=>t in c?k(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var x=(c,t,e)=>(K(c,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const l of h.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerpolicy&&(h.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?h.credentials="include":o.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(o){if(o.ep)return;o.ep=!0;const h=e(o);fetch(o.href,h)}})();const A=document.getElementById("game-window"),i=A.getContext("2d"),f=600,d=600,R=function(){i.fillStyle="black",i.fillRect(0,0,f,d)},T=function(){A.width=f,A.height=d,R(),window.requestAnimationFrame(E)};T();let p={KeyD:!1,KeyA:!1,KeyW:!1,KeyS:!1,space:!1,Escape:!1};document.onkeydown=function(t){t.code in p&&(p[t.code]=!0),t.code=="Space"&&(p.space=!0)};document.onkeyup=function(t){t.code in p&&(p[t.code]=!1),t.code=="Space"&&(p.space=!1)};class U{constructor(){this.asteroid_kills=0,this.key_map={up:"KeyW",left:"KeyA",down:"KeyS",right:"KeyD",fire:"space"},this.position={x:f/2,y:d/2},this.vel={x:0,y:0},this.angle=-Math.PI/2,this.speed=0,this.MAX_SPEED=500,this.ACC_ON_CLICK=800,this.RADIUS=15,this.DRAG=1,this.has_fired=!1}update(t){if(!isNaN(t)){if(p[this.key_map.left]&&(this.angle-=7*t),p[this.key_map.right]&&(this.angle+=7*t),p[this.key_map.up]){let e=this.ACC_ON_CLICK*Math.cos(this.angle)*t,s=this.ACC_ON_CLICK*Math.sin(this.angle)*t;this.vel.x+=e,this.vel.y+=s;let o=this.vel.x,h=this.vel.y,l=Math.sqrt(o*o+h*h);l>=this.MAX_SPEED&&(this.vel.x=this.MAX_SPEED*(o/l),this.vel.y=this.MAX_SPEED*(h/l))}else p.ArrowUp||(this.vel.x!=0&&(this.vel.x-=this.DRAG*this.vel.x*t),this.vel.y!=0&&(this.vel.y-=this.DRAG*this.vel.y*t));this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,p[this.key_map.down],p[this.key_map.fire]&&this.has_fired==!1?(this.has_fired=!0,u.bullets.push(new u(this.angle,this.position.x+this.RADIUS*Math.cos(this.angle),this.position.y+this.RADIUS*Math.sin(this.angle)))):p[this.key_map.fire]||(this.has_fired=!1),this.position.x>f+this.RADIUS/2?this.position.x=0:this.position.x<0-this.RADIUS/2?this.position.x=f:this.position.y>d+this.RADIUS/2?this.position.y=0:this.position.y<0-this.RADIUS/2&&(this.position.y=d),this.draw()}}draw(){let t=this.position.x,e=this.position.y,s=this.angle,o=t+this.RADIUS*Math.cos(s),h=e+this.RADIUS*Math.sin(s),l=t+this.RADIUS*Math.cos(s+2.2*Math.PI/3),w=e+this.RADIUS*Math.sin(s+2.2*Math.PI/3),D=t+this.RADIUS*Math.cos(s-2.2*Math.PI/3),M=e+this.RADIUS*Math.sin(s-2.2*Math.PI/3),m=t-this.RADIUS/3.5*Math.cos(s),b=e-this.RADIUS/3.5*Math.sin(s);i.beginPath(),i.strokeStyle="Lime",i.fillStyle="Black",i.lineWidth=1.5,i.moveTo(o,h),i.lineTo(l,w),i.lineTo(m,b),i.lineTo(D,M),i.closePath(),i.fill(),i.stroke()}}const n=class{static update_asteroids(t,e){for(let s=0;s<n.asteroids.length;s++){n.asteroids[s].update(t),Math.sqrt((n.asteroids[s].position.x-e.position.x)*(n.asteroids[s].position.x-e.position.x)+(n.asteroids[s].position.y-e.position.y)*(n.asteroids[s].position.y-e.position.y))<n.asteroids[s].RADIUS+e.RADIUS/3&&(r.in_end_menu=!0);let h=!1;for(let l=0;l<u.bullets.length;l++)Math.sqrt((n.asteroids[s].position.x-u.bullets[l].position.x)*(n.asteroids[s].position.x-u.bullets[l].position.x)+(n.asteroids[s].position.y-u.bullets[l].position.y)*(n.asteroids[s].position.y-u.bullets[l].position.y))<n.asteroids[s].RADIUS+u.bullets[l].RADIUS&&(u.bullets.splice(l,1),l--,h=!0);if(h){let l=n.asteroids[s].level,w=n.asteroids[s].position.x,D=n.asteroids[s].position.y;if(n.asteroids.splice(s,1),s--,l!=n.MAXLVL)for(let M=0;M<2;M++){let m=new n;m.spawn(w,D,l+1),n.asteroids.push(m)}e.asteroid_kills++}}}constructor(){this.level=0,this.position={x:0,y:0},this.SPEED=n.speed[this.level],this.angle=Math.random()*2*Math.PI,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.RADIUS=n.radius[this.level];let t=Math.floor(Math.random()*4);t==0?(this.position.x=0,this.position.y=Math.random()*d):t==1?(this.position.y=0,this.position.x=Math.random()*f):t==2?(this.position.x=f,this.position.y=Math.random()*d):t==3&&(this.position.y=d,this.position.x=Math.random()*f)}spawn(t,e,s){this.level=s,this.position={x:t,y:e},this.SPEED=n.speed[this.level],this.angle=Math.random()*2*Math.PI,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.RADIUS=n.radius[this.level]}draw(){i.beginPath(),i.strokeStyle="White",i.fillStyle="black",i.lineWidth=1.5,i.arc(this.position.x,this.position.y,this.RADIUS,0,2*Math.PI),i.fill(),i.stroke(),i.closePath()}update(t){isNaN(t)||(this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,this.position.x>f+this.RADIUS?this.position.x=0:this.position.x<0-this.RADIUS?this.position.x=f:this.position.y>d+this.RADIUS?this.position.y=0:this.position.y<0-this.RADIUS&&(this.position.y=d),this.draw())}};let y=n;x(y,"MAXLVL",2),x(y,"radius",[40,30,20]),x(y,"speed",[100,200,300]),x(y,"asteroids",[]);const _=class{static update_bullets(t){for(let e=0;e<_.bullets.length;e++)_.bullets[e].update(t),_.bullets[e].time_since_spawn>_.lifetime&&_.bullets.splice(e,1)}constructor(t,e,s){this.angle=t,this.time_since_spawn=0,this.SPEED=700,this.RADIUS=5,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.position={x:e,y:s},this.draw_pt1={x:this.RADIUS*Math.cos(this.angle),y:this.RADIUS*Math.sin(this.angle)},this.draw_pt2={x:this.RADIUS*Math.cos(this.angle+2.5*Math.PI/3),y:this.RADIUS*Math.sin(this.angle+2.5*Math.PI/3)},this.draw_pt3={x:this.RADIUS*Math.cos(this.angle-2.5*Math.PI/3),y:this.RADIUS*Math.sin(this.angle-2.5*Math.PI/3)}}draw(){let t=this.position.x+this.draw_pt1.x,e=this.position.y+this.draw_pt1.y,s=this.position.x+this.draw_pt2.x,o=this.position.y+this.draw_pt2.y,h=this.position.x+this.draw_pt3.x,l=this.position.y+this.draw_pt3.y;i.beginPath(),i.strokeStyle="Yellow",i.fillStyle="Black",i.lineWidth=1.5,i.moveTo(t,e),i.lineTo(s,o),i.lineTo(h,l),i.closePath(),i.fill(),i.stroke()}update(t){isNaN(t)||(this.time_since_spawn+=t,this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,this.position.x>f+this.RADIUS?this.position.x=0:this.position.x<0-this.RADIUS?this.position.x=f:this.position.y>d+this.RADIUS?this.position.y=0:this.position.y<0-this.RADIUS&&(this.position.y=d),this.draw())}};let u=_;x(u,"bullets",[]),x(u,"lifetime",.8);const a=class{static updateStartMenu(){p.KeyS&&a.in_start_menu&&(a.in_start_menu=!1),a.in_start_menu&&a.drawStartMenu()}static drawStartMenu(){i.font="25px helvetica",i.fillStyle="white",i.textAlign="center",i.fillText("Press *s* to Start!",f/2,d/2)}static updatePauseMenu(){a.in_start_menu||a.in_end_menu||(p.Escape&&!a.in_pause_menu&&!a.pause_is_held&&(a.in_pause_menu=!0,a.pause_is_held=!0),p.Escape||(a.pause_is_held=!1),p.Escape&&a.in_pause_menu&&!a.pause_is_held&&(a.in_pause_menu=!1,a.pause_is_held=!0),a.in_pause_menu&&a.drawPauseMenu())}static drawPauseMenu(){i.font="25px helvetica",i.fillStyle="white",i.textAlign="center",i.fillText("Paused",f/2,d/2)}static updateEndMenu(){a.in_end_menu&&a.drawEndMenu(),a.in_end_menu&&p.KeyS&&(I=new U,a.in_end_menu=!1,y.asteroids=[],u.bullets=[])}static drawEndMenu(){i.font="25px helvetica",i.fillStyle="white",i.textAlign="center",i.fillText("Game Over!",f/2,d/2-20),i.fillText("*s* to play again",f/2,d/2+20)}constructor(){}};let r=a;x(r,"in_start_menu",!1),x(r,"in_pause_menu",!1),x(r,"pause_is_held",!1),x(r,"in_end_menu",!1);class v{static drawFps(t){i.textAlign="left",i.font="20px Helvetica",i.fillStyle="white",i.fillText("FPS: "+t,5,d-20)}static drawEscHelper(){i.textAlign="right",i.font="20px Helvetica",i.fillStyle="white",i.fillText("*esc* to pause",f-5,20)}static drawKills(){i.textAlign="left",i.font="20px Helvetica",i.fillStyle="white",i.fillText("Kills: "+I.asteroid_kills,5,20)}}let I=new U;y.asteroids.push(new y);let S,P,g=0,N=250;r.in_start_menu=!0;r.in_pause_menu=!1;r.in_end_menu=!1;function E(c){R(),S=(c-P)/1e3,isNaN(S)&&(S=0),P=c,r.updateStartMenu(),r.updatePauseMenu(),r.updateEndMenu(),!r.in_start_menu&&!r.in_pause_menu&&(r.in_end_menu||v.drawEscHelper(),v.drawKills(),y.update_asteroids(S,I),u.update_bullets(S),r.in_end_menu||(g+=S*60,Math.floor(Math.random()*(N-g)*y.asteroids.length*2)<=0&&(y.asteroids.push(new y),g=0),I.update(S))),window.requestAnimationFrame(E)}
