var T=Object.defineProperty;var N=(c,t,e)=>t in c?T(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var x=(c,t,e)=>(N(c,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerpolicy&&(h.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?h.credentials="include":o.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(o){if(o.ep)return;o.ep=!0;const h=e(o);fetch(o.href,h)}})();const A=document.getElementById("game-window"),i=A.getContext("2d"),f=600,d=600,E=function(){i.fillStyle="black",i.fillRect(0,0,f,d)},L=function(){A.width=f,A.height=d,E(),window.requestAnimationFrame(k)};L();let p={d:!1,a:!1,w:!1,s:!1,space:!1,Escape:!1};document.onkeydown=function(t){t.key in p&&(p[t.key]=!0),t.code=="Space"&&(p.space=!0)};document.onkeyup=function(t){t.key in p&&(p[t.key]=!1),t.code=="Space"&&(p.space=!1)};class U{constructor(){this.asteroid_kills=0,this.key_map={up:"w",left:"a",down:"s",right:"d",fire:"space"},this.position={x:f/2,y:d/2},this.vel={x:0,y:0},this.angle=-Math.PI/2,this.speed=0,this.MAX_SPEED=500,this.ACC_ON_CLICK=800,this.RADIUS=15,this.DRAG=1,this.has_fired=!1}update(t){if(!isNaN(t)){if(p[this.key_map.left]&&(this.angle-=7*t),p[this.key_map.right]&&(this.angle+=7*t),p[this.key_map.up]){let e=this.ACC_ON_CLICK*Math.cos(this.angle)*t,s=this.ACC_ON_CLICK*Math.sin(this.angle)*t;this.vel.x+=e,this.vel.y+=s;let o=this.vel.x,h=this.vel.y,a=Math.sqrt(o*o+h*h);a>=this.MAX_SPEED&&(this.vel.x=this.MAX_SPEED*(o/a),this.vel.y=this.MAX_SPEED*(h/a))}else p.ArrowUp||(this.vel.x!=0&&(this.vel.x-=this.DRAG*this.vel.x*t),this.vel.y!=0&&(this.vel.y-=this.DRAG*this.vel.y*t));this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,p[this.key_map.down],p[this.key_map.fire]&&this.has_fired==!1?(this.has_fired=!0,u.bullets.push(new u(this.angle,this.position.x+this.RADIUS*Math.cos(this.angle),this.position.y+this.RADIUS*Math.sin(this.angle)))):p[this.key_map.fire]||(this.has_fired=!1),this.position.x>f+this.RADIUS/2?this.position.x=0:this.position.x<0-this.RADIUS/2?this.position.x=f:this.position.y>d+this.RADIUS/2?this.position.y=0:this.position.y<0-this.RADIUS/2&&(this.position.y=d),this.draw()}}draw(){let t=this.position.x,e=this.position.y,s=this.angle,o=t+this.RADIUS*Math.cos(s),h=e+this.RADIUS*Math.sin(s),a=t+this.RADIUS*Math.cos(s+2.2*Math.PI/3),w=e+this.RADIUS*Math.sin(s+2.2*Math.PI/3),g=t+this.RADIUS*Math.cos(s-2.2*Math.PI/3),M=e+this.RADIUS*Math.sin(s-2.2*Math.PI/3),m=t-this.RADIUS/3.5*Math.cos(s),b=e-this.RADIUS/3.5*Math.sin(s);i.beginPath(),i.strokeStyle="Lime",i.fillStyle="Black",i.lineWidth=1.5,i.moveTo(o,h),i.lineTo(a,w),i.lineTo(m,b),i.lineTo(g,M),i.closePath(),i.fill(),i.stroke()}}const n=class{static update_asteroids(t,e){for(let s=0;s<n.asteroids.length;s++){n.asteroids[s].update(t),Math.sqrt((n.asteroids[s].position.x-e.position.x)*(n.asteroids[s].position.x-e.position.x)+(n.asteroids[s].position.y-e.position.y)*(n.asteroids[s].position.y-e.position.y))<n.asteroids[s].RADIUS&&(r.in_end_menu=!0);let h=!1;for(let a=0;a<u.bullets.length;a++)Math.sqrt((n.asteroids[s].position.x-u.bullets[a].position.x)*(n.asteroids[s].position.x-u.bullets[a].position.x)+(n.asteroids[s].position.y-u.bullets[a].position.y)*(n.asteroids[s].position.y-u.bullets[a].position.y))<n.asteroids[s].RADIUS+u.bullets[a].RADIUS&&(u.bullets.splice(a,1),a--,h=!0);if(h){let a=n.asteroids[s].level,w=n.asteroids[s].position.x,g=n.asteroids[s].position.y;if(n.asteroids.splice(s,1),s--,a!=n.MAXLVL)for(let M=0;M<2;M++){let m=new n;m.spawn(w,g,a+1),n.asteroids.push(m)}e.asteroid_kills++}}}constructor(){this.level=0,this.position={x:0,y:0},this.SPEED=n.speed[this.level],this.angle=Math.random()*2*Math.PI,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.RADIUS=n.radius[this.level];let t=Math.floor(Math.random()*4);t==0?(this.position.x=0,this.position.y=Math.random()*d):t==1?(this.position.y=0,this.position.x=Math.random()*f):t==2?(this.position.x=f,this.position.y=Math.random()*d):t==3&&(this.position.y=d,this.position.x=Math.random()*f)}spawn(t,e,s){this.level=s,this.position={x:t,y:e},this.SPEED=n.speed[this.level],this.angle=Math.random()*2*Math.PI,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.RADIUS=n.radius[this.level]}draw(){i.beginPath(),i.strokeStyle="White",i.fillStyle="black",i.lineWidth=1.5,i.arc(this.position.x,this.position.y,this.RADIUS,0,2*Math.PI),i.fill(),i.stroke(),i.closePath()}update(t){isNaN(t)||(this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,this.position.x>f+this.RADIUS?this.position.x=0:this.position.x<0-this.RADIUS?this.position.x=f:this.position.y>d+this.RADIUS?this.position.y=0:this.position.y<0-this.RADIUS&&(this.position.y=d),this.draw())}};let y=n;x(y,"MAXLVL",2),x(y,"radius",[40,30,20]),x(y,"speed",[100,200,300]),x(y,"asteroids",[]);const S=class{static update_bullets(t){for(let e=0;e<S.bullets.length;e++)S.bullets[e].update(t),S.bullets[e].time_since_spawn>S.lifetime&&S.bullets.splice(e,1)}constructor(t,e,s){this.angle=t,this.time_since_spawn=0,this.SPEED=700,this.RADIUS=5,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.position={x:e,y:s},this.draw_pt1={x:this.RADIUS*Math.cos(this.angle),y:this.RADIUS*Math.sin(this.angle)},this.draw_pt2={x:this.RADIUS*Math.cos(this.angle+2.5*Math.PI/3),y:this.RADIUS*Math.sin(this.angle+2.5*Math.PI/3)},this.draw_pt3={x:this.RADIUS*Math.cos(this.angle-2.5*Math.PI/3),y:this.RADIUS*Math.sin(this.angle-2.5*Math.PI/3)}}draw(){let t=this.position.x+this.draw_pt1.x,e=this.position.y+this.draw_pt1.y,s=this.position.x+this.draw_pt2.x,o=this.position.y+this.draw_pt2.y,h=this.position.x+this.draw_pt3.x,a=this.position.y+this.draw_pt3.y;i.beginPath(),i.strokeStyle="Yellow",i.fillStyle="Black",i.lineWidth=1.5,i.moveTo(t,e),i.lineTo(s,o),i.lineTo(h,a),i.closePath(),i.fill(),i.stroke()}update(t){isNaN(t)||(this.time_since_spawn+=t,this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,this.position.x>f+this.RADIUS?this.position.x=0:this.position.x<0-this.RADIUS?this.position.x=f:this.position.y>d+this.RADIUS?this.position.y=0:this.position.y<0-this.RADIUS&&(this.position.y=d),this.draw())}};let u=S;x(u,"bullets",[]),x(u,"lifetime",.8);const l=class{static updateStartMenu(){p.s&&l.in_start_menu&&(l.in_start_menu=!1),l.in_start_menu&&l.drawStartMenu()}static drawStartMenu(){i.font="25px helvetica",i.fillStyle="white",i.textAlign="center",i.fillText("Press *s* to Start!",f/2,d/2)}static updatePauseMenu(){l.in_start_menu||l.in_end_menu||(p.Escape&&!l.in_pause_menu&&!l.pause_is_held&&(l.in_pause_menu=!0,l.pause_is_held=!0),p.Escape||(l.pause_is_held=!1),p.Escape&&l.in_pause_menu&&!l.pause_is_held&&(l.in_pause_menu=!1,l.pause_is_held=!0),l.in_pause_menu&&l.drawPauseMenu())}static drawPauseMenu(){i.font="25px helvetica",i.fillStyle="white",i.textAlign="center",i.fillText("Paused",f/2,d/2)}static updateEndMenu(){l.in_end_menu&&l.drawEndMenu(),l.in_end_menu&&p.s&&(I=new U,l.in_end_menu=!1,y.asteroids=[],u.bullets=[])}static drawEndMenu(){i.font="25px helvetica",i.fillStyle="white",i.textAlign="center",i.fillText("Game Over!",f/2,d/2-20),i.fillText("<s> to play again",f/2,d/2+20)}constructor(){}};let r=l;x(r,"in_start_menu",!1),x(r,"in_pause_menu",!1),x(r,"pause_is_held",!1),x(r,"in_end_menu",!1);class P{static drawFps(t){i.textAlign="left",i.font="20px Helvetica",i.fillStyle="white",i.fillText("FPS: "+t,5,20)}static drawEscHelper(){i.textAlign="right",i.font="20px Helvetica",i.fillStyle="white",i.fillText("*esc* to pause",f-5,20)}}let I=new U;y.asteroids.push(new y);let _,v,R,D=0,C=200;r.in_start_menu=!0;r.in_pause_menu=!1;r.in_end_menu=!1;function k(c){E(),_=(c-v)/1e3,isNaN(_)&&(_=0),v=c,R=Math.round(1/_),P.drawFps(R),r.updateStartMenu(),r.updatePauseMenu(),r.updateEndMenu(),!r.in_start_menu&&!r.in_pause_menu&&(r.in_end_menu||P.drawEscHelper(),i.textAlign="left",i.fillText("Kills: "+I.asteroid_kills,5,50),y.update_asteroids(_,I),u.update_bullets(_),r.in_end_menu||(D+=_*60,Math.floor(Math.random()*(C-D)*y.asteroids.length*2)<=0&&(y.asteroids.push(new y),D=0),I.update(_))),window.requestAnimationFrame(k)}
