var m=Object.defineProperty;var P=(l,t,s)=>t in l?m(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var d=(l,t,s)=>(P(l,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))h(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const S=document.getElementById("game-window"),i=S.getContext("2d"),a=600,p=600,D=function(){i.fillStyle="black",i.fillRect(0,0,a,p)},v=function(){S.width=a,S.height=p,D(),window.requestAnimationFrame(g)};v();let n={d:!1,a:!1,w:!1,s:!1,space:!1};document.onkeydown=function(t){t.key in n&&(n[t.key]=!0),t.code=="Space"&&(n.space=!0)};document.onkeyup=function(t){t.key in n&&(n[t.key]=!1),t.code=="Space"&&(n.space=!1)};class k{constructor(){this.key_map={up:"w",left:"a",down:"s",right:"d",fire:"space"},this.position={x:a/2,y:p/2},this.vel={x:0,y:0},this.angle=-Math.PI/2,this.speed=0,this.MAX_SPEED=500,this.ACC_ON_CLICK=800,this.RADIUS=15,this.DRAG=1,this.has_fired=!1}update(t){if(!isNaN(t)){if(n[this.key_map.left]&&(this.angle-=7*t),n[this.key_map.right]&&(this.angle+=7*t),n[this.key_map.up]){let s=this.ACC_ON_CLICK*Math.cos(this.angle)*t,h=this.ACC_ON_CLICK*Math.sin(this.angle)*t;this.vel.x+=s,this.vel.y+=h;let e=this.vel.x,o=this.vel.y,r=Math.sqrt(e*e+o*o);r>=this.MAX_SPEED&&(this.vel.x=this.MAX_SPEED*(e/r),this.vel.y=this.MAX_SPEED*(o/r))}else n.ArrowUp||(this.vel.x!=0&&(this.vel.x-=this.DRAG*this.vel.x*t),this.vel.y!=0&&(this.vel.y-=this.DRAG*this.vel.y*t));this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,n[this.key_map.down],n[this.key_map.fire]&&this.has_fired==!1?(this.has_fired=!0,c.bullets.push(new c(this.angle,this.position.x+this.RADIUS*Math.cos(this.angle),this.position.y+this.RADIUS*Math.sin(this.angle))),console.log(c.bullets)):n[this.key_map.fire]||(this.has_fired=!1),this.position.x>a+this.RADIUS/2?this.position.x=0:this.position.x<0-this.RADIUS/2?this.position.x=a:this.position.y>p+this.RADIUS/2?this.position.y=0:this.position.y<0-this.RADIUS/2&&(this.position.y=p),this.draw()}}draw(){let t=this.position.x,s=this.position.y,h=this.angle,e=t+this.RADIUS*Math.cos(h),o=s+this.RADIUS*Math.sin(h),r=t+this.RADIUS*Math.cos(h+2.2*Math.PI/3),M=s+this.RADIUS*Math.sin(h+2.2*Math.PI/3),A=t+this.RADIUS*Math.cos(h-2.2*Math.PI/3),_=s+this.RADIUS*Math.sin(h-2.2*Math.PI/3),R=t-this.RADIUS/3.5*Math.cos(h),U=s-this.RADIUS/3.5*Math.sin(h);i.beginPath(),i.strokeStyle="White",i.fillStyle="Black",i.lineWidth=1.5,i.moveTo(e,o),i.lineTo(r,M),i.lineTo(R,U),i.lineTo(A,_),i.closePath(),i.fill(),i.stroke()}}const u=class{static update_asteroids(t){for(let s=0;s<u.asteroids.length;s++)u.asteroids[s].update(t)}constructor(){this.level=0,this.position={x:0,y:0},this.SPEED=u.speed[this.level],this.angle=Math.random()*2*Math.PI,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.RADIUS=u.radius[this.level];let t=Math.floor(Math.random()*4);t==0?(this.position.x=0,this.position.y=Math.random()*p):t==1?(this.position.y=0,this.position.x=Math.random()*a):t==2?(this.position.x=a,this.position.y=Math.random()*p):t==3&&(this.position.y=p,this.position.x=Math.random()*a)}draw(){i.beginPath(),i.strokeStyle="White",i.fillStyle="black",i.lineWidth=1.5,i.arc(this.position.x,this.position.y,this.RADIUS,0,2*Math.PI),i.fill(),i.stroke(),i.closePath()}update(t){isNaN(t)||(this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,this.position.x>a+this.RADIUS?this.position.x=0:this.position.x<0-this.RADIUS?this.position.x=a:this.position.y>p+this.RADIUS?this.position.y=0:this.position.y<0-this.RADIUS&&(this.position.y=p),this.draw())}};let f=u;d(f,"radius",[40,20,10]),d(f,"speed",[100,200,350]),d(f,"asteroids",[]);const y=class{static update_bullets(t){for(let s=0;s<y.bullets.length;s++)y.bullets[s].update(t),y.bullets[s].time_since_spawn>y.lifetime&&(y.bullets.splice(s,1),console.log(y.bullets))}constructor(t,s,h){this.angle=t,this.time_since_spawn=0,this.SPEED=700,this.RADIUS=5,this.vel={x:this.SPEED*Math.cos(this.angle),y:this.SPEED*Math.sin(this.angle)},this.position={x:s,y:h},this.draw_pt1={x:this.RADIUS*Math.cos(this.angle),y:this.RADIUS*Math.sin(this.angle)},this.draw_pt2={x:this.RADIUS*Math.cos(this.angle+2.5*Math.PI/3),y:this.RADIUS*Math.sin(this.angle+2.5*Math.PI/3)},this.draw_pt3={x:this.RADIUS*Math.cos(this.angle-2.5*Math.PI/3),y:this.RADIUS*Math.sin(this.angle-2.5*Math.PI/3)}}draw(){let t=this.position.x+this.draw_pt1.x,s=this.position.y+this.draw_pt1.y,h=this.position.x+this.draw_pt2.x,e=this.position.y+this.draw_pt2.y,o=this.position.x+this.draw_pt3.x,r=this.position.y+this.draw_pt3.y;i.beginPath(),i.strokeStyle="White",i.fillStyle="Yellow",i.lineWidth=1.5,i.moveTo(t,s),i.lineTo(h,e),i.lineTo(o,r),i.closePath(),i.fill(),i.stroke()}update(t){isNaN(t)||(this.time_since_spawn+=t,this.position.x+=this.vel.x*t,this.position.y+=this.vel.y*t,this.position.x>a+this.RADIUS?this.position.x=0:this.position.x<0-this.RADIUS?this.position.x=a:this.position.y>p+this.RADIUS?this.position.y=0:this.position.y<0-this.RADIUS&&(this.position.y=p),this.draw())}};let c=y;d(c,"bullets",[]),d(c,"lifetime",.8);let E=new k;f.asteroids.push(new f);console.log(f.asteroids);new c(0,300,300);let x,I,w;function g(l){D(),x=(l-I)/1e3,I=l,w=Math.round(1/x),i.font="20px Helvetica",i.fillStyle="white",i.fillText("FPS: "+w,5,20),f.update_asteroids(x),c.update_bullets(x),E.update(x),window.requestAnimationFrame(g)}
